<div class="main-container">
  <div class="registro-container">
    <!-- Contenedor izquierdo (30%) -->
    <div class="left-panel">
      <!-- Bot√≥n Volver-->
      <button class="btn-volver" (click)="volver()">‚Üê Volver</button>
      
      <img src="../../../../../../assets/img/logos/logo-documento.png" alt="logo UrbanLife" class="imagen">
    </div>

    <!-- Contenedor derecho (70%) -->
    <div class="right-panel">
      <div class="form-container">
        <h1 class="titulo-principal">Registro de Documentos</h1>

        <form class="registro-form" [formGroup]="registroForm" (ngSubmit)="onSubmit()">
          
          <div class="form-section">
            <!-- Campo Nombre del Documento -->
            <div class="form-group">
              <label class="form-label">Nombre del Documento *</label>
              <input 
                type="text" 
                class="form-input"
                formControlName="nombreDocumento"
                placeholder="Ingrese el nombre del documento"
                maxlength="100"
              >
              <div class="char-counter">{{ nombreDocumento?.value?.length || 0 }}/100</div>
              <div class="error-message" *ngIf="nombreDocumento?.invalid && nombreDocumento?.touched">
                <span *ngIf="nombreDocumento?.errors?.['required']">El nombre del documento es requerido</span>
                <span *ngIf="nombreDocumento?.errors?.['minlength']">M√≠nimo 3 caracteres</span>
              </div>
            </div>

            <!-- Campo Tipo de Documento -->
            <div class="form-group">
              <label class="form-label">Tipo de Documento *</label>
              <select 
                class="form-input"
                formControlName="tipoDocumento"
              >
                <option value="">Seleccione un tipo de documento</option>
                <option *ngFor="let tipo of tiposDocumento" [value]="tipo.value">{{ tipo.label }}</option>
              </select>
              <div class="error-message" *ngIf="tipoDocumento?.invalid && tipoDocumento?.touched">
                <span *ngIf="tipoDocumento?.errors?.['required']">El tipo de documento es requerido</span>
              </div>
            </div>

            <!-- Campo Documento (Archivo) -->
            <div class="form-group">
              <label class="form-label">Documento *</label>
              <div class="file-upload-container">
                <input 
                  type="file" 
                  class="file-input"
                  formControlName="archivo"
                  (change)="onFileSelected($event)"
                  accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.zip,.rar"
                  #archivoInput
                >
                <div class="file-upload-area" (click)="archivoInput.click()" [class.has-file]="archivoSeleccionado">
                  <span class="file-icon">üìÑ</span>
                  <span class="file-text" [class.has-file]="archivoSeleccionado">
                    {{ archivoSeleccionado ? archivoSeleccionado.name : 'Seleccione un archivo' }}
                  </span>
                  <button type="button" class="btn-browse">Examinar</button>
                </div>
              </div>
              <div class="file-hint">Formatos aceptados: PDF, DOC, JPG, PNG, ZIP, RAR (m√°x. 10MB)</div>
              <div class="error-message" *ngIf="archivo?.invalid && archivo?.touched">
                <span *ngIf="archivo?.errors?.['required']">El documento es requerido</span>
                <span *ngIf="archivo?.errors?.['maxSize']">El archivo es demasiado grande. M√°ximo 10MB</span>
                <span *ngIf="archivo?.errors?.['invalidType']">Formato de archivo no permitido</span>
              </div>
            </div>
          </div>

          <!-- Bot√≥n Registrar -->
          <div class="botones-navegacion">
            <button 
              type="submit" 
              class="btn-registrar"
              [disabled]="registroForm.invalid || loading"
            >
              <span *ngIf="!loading">REGISTRAR DOCUMENTO</span>
              <span *ngIf="loading">PROCESANDO...</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Modal de √©xito -->
<div class="modal-overlay" *ngIf="mostrarModalExito">
  <div class="modal">
    <div class="modal-content">
      <div class="modal-icon">‚úÖ</div>
      <h3 class="modal-title">¬°Documento Registrado!</h3>
      <p class="modal-message">El documento ha sido registrado correctamente en el sistema.</p>
      <button class="btn-modal" (click)="cerrarModalExito()">Aceptar</button>
    </div>
  </div>
</div>

<!-- Modal de error -->
<div class="modal-overlay" *ngIf="mostrarModalError">
  <div class="modal">
    <div class="modal-content">
      <div class="modal-icon">‚ö†Ô∏è</div>
      <h3 class="modal-title">Error en el Formulario</h3>
      <p class="modal-message">Por favor, complete todos los campos obligatorios correctamente.</p>
      <button class="btn-modal" (click)="cerrarModalError()">Entendido</button>
    </div>
  </div>
</div>

<!-- Overlay de carga -->
<div class="loading-overlay" *ngIf="loading">
  <div class="loading-spinner-large"></div>
</div>