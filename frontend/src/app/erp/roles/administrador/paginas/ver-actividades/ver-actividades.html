<div class="main-container">
  <div class="actividades-container">
    <!-- Bot√≥n Volver -->
    <button class="btn-volver" (click)="volver()">‚Üê Volver</button>

    <h1 class="titulo-principal">Actividades del Proyecto</h1>

    <!-- Bot√≥n para a√±adir actividad -->
    <div class="add-activity-section">
      <div class="activity-stats">
        <div class="stat-item">
          <span class="stat-label">Total:</span>
          <span class="stat-value">{{ contarActividadesTotales() }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Completadas:</span>
          <span class="stat-value completadas">{{ contarPorEstado('Completada') }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">En Progreso:</span>
          <span class="stat-value en-progreso">{{ contarPorEstado('En progreso') }}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Pendientes:</span>
          <span class="stat-value pendientes">{{ contarPorEstado('Pendiente') }}</span>
        </div>
      </div>
    </div>

    <!-- Lista de actividades -->
    <div class="actividades-list">
      <!-- Actividades Completadas -->
      <div class="activities-category" *ngIf="actividadesFiltradasPorEstado('Completada').length > 0">
        <div class="category-header completed">
          <h2 class="category-title">‚úÖ COMPLETADAS</h2>
          <span class="activities-count">{{ actividadesFiltradasPorEstado('Completada').length }} actividades</span>
        </div>
        <div class="activities-grid">
          <div class="activity-card completed" *ngFor="let actividad of actividadesFiltradasPorEstado('Completada')">
            <div class="activity-icon">‚úÖ</div>
            <div class="activity-content">
              <div class="activity-header">
                <h3 class="activity-name">{{ actividad.nombre_actividad }}</h3>
                <span class="activity-date">{{ actividad.fecha | date:'dd/MM/yyyy' }}</span>
              </div>
              <p class="activity-desc">{{ actividad.descripcion }}</p>
              <div class="activity-footer">
                <span class="activity-status completed">COMPLETADA</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Actividades En Progreso -->
      <div class="activities-category" *ngIf="actividadesFiltradasPorEstado('En progreso').length > 0">
        <div class="category-header in-progress">
          <h2 class="category-title">üîÑ EN PROGRESO</h2>
          <span class="activities-count">{{ actividadesFiltradasPorEstado('En progreso').length }} actividades</span>
        </div>
        <div class="activities-grid">
          <div class="activity-card in-progress" *ngFor="let actividad of actividadesFiltradasPorEstado('En progreso')">
            <div class="activity-icon">üîÑ</div>
            <div class="activity-content">
              <div class="activity-header">
                <h3 class="activity-name">{{ actividad.nombre_actividad }}</h3>
                <span class="activity-date">{{ actividad.fecha | date:'dd/MM/yyyy' }}</span>
              </div>
              <p class="activity-desc">{{ actividad.descripcion }}</p>
              <div class="activity-footer">
                <span class="activity-status in-progress">EN PROGRESO</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Actividades Pendientes -->
      <div class="activities-category" *ngIf="actividadesFiltradasPorEstado('Pendiente').length > 0">
        <div class="category-header pending">
          <h2 class="category-title">‚è≥ PENDIENTES</h2>
          <span class="activities-count">{{ actividadesFiltradasPorEstado('Pendiente').length }} actividades</span>
        </div>
        <div class="activities-grid">
          <div class="activity-card pending" *ngFor="let actividad of actividadesFiltradasPorEstado('Pendiente')">
            <div class="activity-icon">‚è≥</div>
            <div class="activity-content">
              <div class="activity-header">
                <h3 class="activity-name">{{ actividad.nombre_actividad }}</h3>
                <span class="activity-date">{{ actividad.fecha | date:'dd/MM/yyyy' }}</span>
              </div>
              <p class="activity-desc">{{ actividad.descripcion }}</p>
              <div class="activity-footer">
                <span class="activity-status pending">PENDIENTE</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Mensaje si no hay actividades -->
      <div class="no-activities" *ngIf="actividadesFiltradas().length === 0">
        <h3>No hay actividades registradas</h3>
        <p *ngIf="filtroEstado === 'todas'">
          Presiona "A√±adir Actividad" para comenzar a registrar las actividades del proyecto.
        </p>
        <p *ngIf="filtroEstado !== 'todas'">
          No hay actividades con el estado "{{ filtroEstado }}".
        </p>
      </div>
    </div>

    <!-- Resumen y progreso -->
    <div class="progress-summary">
      <h3>Progreso General del Proyecto</h3>
      <div class="progress-bar-container">
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="calcularProgresoGeneral()"></div>
        </div>
        <div class="progress-text">{{ calcularProgresoGeneral() }}% completado</div>
      </div>
      
      <div class="summary-details">
        <div class="detail-item">
          <span class="detail-label">Actividades Completadas:</span>
          <span class="detail-value">{{ contarPorEstado('Completada') }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Actividades en Progreso:</span>
          <span class="detail-value">{{ contarPorEstado('En progreso') }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Actividades Pendientes:</span>
          <span class="detail-value">{{ contarPorEstado('Pendiente') }}</span>
        </div>
        <div class="detail-item total">
          <span class="detail-label">Total de Actividades:</span>
          <span class="detail-value">{{ contarActividadesTotales() }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
