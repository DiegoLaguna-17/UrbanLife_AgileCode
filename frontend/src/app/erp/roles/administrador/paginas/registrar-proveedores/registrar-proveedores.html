<div class="main-container">
  <div class="registro-container">
    <!-- Contenedor izquierdo (30%) -->
    <div class="left-panel">
      <!-- Bot√≥n Volver-->
      <button class="btn-volver" (click)="volver()">‚Üê Volver</button>
      
      <img src="../../../../../../assets/img/logos/logo-proveedor.png" alt="logo UrbanLife" class="imagen">
    </div>

    <!-- Contenedor derecho (70%) -->
    <div class="right-panel">
      <div class="form-container">
        <h1 class="titulo-principal">Registro de Proveedores</h1>

        <form class="registro-form" [formGroup]="registroForm" (ngSubmit)="onSubmit()">
          
          <!-- PRIMERA PARTE: Datos del Proveedor -->
          <div class="form-section" *ngIf="pasoActual === 1">
            <h2 class="section-title">Datos del Proveedor</h2>
            
            <!-- Campo Nombre del Proveedor -->
            <div class="form-group">
              <label class="form-label">Nombre del Proveedor *</label>
              <input 
                type="text" 
                class="form-input"
                formControlName="nombre"
                placeholder="Ingrese el nombre del proveedor"
              >
              <div class="error-message" *ngIf="nombre?.invalid && nombre?.touched">
                <span *ngIf="nombre?.errors?.['required']">El nombre del proveedor es requerido</span>
                <span *ngIf="nombre?.errors?.['minlength']">M√≠nimo 3 caracteres</span>
              </div>
            </div>

            <!-- Campo Visibilidad -->
            <div class="form-group">
              <label class="form-label">Visibilidad *</label>
              <select 
                class="form-input"
                formControlName="visibilidad"
              >
                <option value="">Seleccione una opci√≥n</option>
                <option value="true">S√≠</option>
                <option value="false">No</option>
              </select>
              <div class="error-message" *ngIf="visibilidad?.invalid && visibilidad?.touched">
                <span *ngIf="visibilidad?.errors?.['required']">La visibilidad es requerida</span>
              </div>
            </div>

            <!-- Campo Sitio Web -->
            <div class="form-group">
              <label class="form-label">Sitio Web</label>
              <input 
                type="url" 
                class="form-input"
                formControlName="web"
                placeholder="https://www.ejemplo.com"
              >
              <div class="error-message" *ngIf="web?.invalid && web?.touched">
                <span *ngIf="web?.errors?.['pattern']">Ingrese una URL v√°lida</span>
              </div>
            </div>

            <!-- Campo Logo del Proveedor -->
            <div class="form-group">
              <label class="form-label">Logo del Proveedor</label>
              <div class="file-upload-container">
                <input 
                  type="file" 
                  class="file-input"
                  formControlName="logo"
                  (change)="onFileSelected($event)"
                  accept=".png,.jpg,.jpeg"
                  #fileInput
                >
                <div class="file-upload-area" (click)="fileInput.click()">
                  <span class="file-icon">üñºÔ∏è</span>
                  <span class="file-text" [class.has-file]="logoArchivo">
                    {{ logoArchivo ? logoArchivo.name : 'Seleccione imagen PNG o JPG' }}
                  </span>
                  <button type="button" class="btn-browse">Examinar</button>
                </div>
              </div>
              <div class="file-hint">Formatos aceptados: PNG, JPG, JPEG</div>
            </div>
          </div>

          <!-- SEGUNDA PARTE: Datos de Contacto -->
          <div class="form-section" *ngIf="pasoActual === 2">
            <h2 class="section-title">Datos de Contacto</h2>
            
            <!-- Campo Nombre de Contacto -->
            <div class="form-group">
              <label class="form-label">Nombre de la Persona Contacto</label>
              <input 
                type="text" 
                class="form-input"
                formControlName="contacto"
                placeholder="Ingrese el nombre del contacto"
              >
              <div class="error-message" *ngIf="contacto?.invalid && contacto?.touched">
                <span *ngIf="contacto?.errors?.['required']">El nombre de contacto es requerido</span>
                <span *ngIf="contacto?.errors?.['minlength']">M√≠nimo 3 caracteres</span>
              </div>
            </div>

            <!-- Campo Tel√©fono -->
            <div class="form-group">
              <label class="form-label">Tel√©fono de Contacto</label>
              <input 
                type="tel" 
                class="form-input"
                formControlName="telefono"
                placeholder="Ingrese el tel√©fono"
              >
            </div>

            <!-- Campo Correo -->
            <div class="form-group">
              <label class="form-label">Correo de Contacto</label>
              <input 
                type="email" 
                class="form-input"
                formControlName="correo"
                placeholder="correo@ejemplo.com"
              >
              <div class="error-message" *ngIf="correo?.invalid && correo?.touched">
                <span *ngIf="correo?.errors?.['required']">El correo es requerido</span>
                <span *ngIf="correo?.errors?.['email']">Ingrese un correo v√°lido</span>
              </div>
            </div>

            <!-- Campo Direcci√≥n -->
            <div class="form-group">
              <label class="form-label">Direcci√≥n F√≠sica</label>
              <textarea 
                class="form-textarea"
                formControlName="direccion"
                placeholder="Ingrese la direcci√≥n f√≠sica completa"
                rows="3"
              ></textarea>
              <div class="error-message" *ngIf="direccion?.invalid && direccion?.touched">
                <span *ngIf="direccion?.errors?.['required']">La direcci√≥n es requerida</span>
                <span *ngIf="direccion?.errors?.['minlength']">M√≠nimo 10 caracteres</span>
              </div>
            </div>
          </div>
          <!-- Botones de navegaci√≥n -->
          <div class="botones-navegacion">
            <button 
              type="button" 
              class="btn-siguiente"
              *ngIf="pasoActual === 1"
              (click)="siguientePaso()"
              [disabled]="!esPaso1Valido()"
            >
              Siguiente ‚Üí
            </button>
            
            <button 
              type="button" 
              class="btn-anterior"
              *ngIf="pasoActual === 2"
              (click)="anteriorPaso()"
            >
              ‚Üê Anterior
            </button>
            
            <button 
              type="submit" 
              class="btn-registrar"
              *ngIf="pasoActual === 2"
              [disabled]="registroForm.invalid"
            >
              REGISTRAR
            </button>
          </div>
        </form>
        <div class="progress-bar-container">
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="pasoActual === 1 ? 50 : 100"></div>
          </div>
          <div class="progress-text">
            Paso {{ pasoActual }} de 2 - {{ pasoActual === 1 ? '50%' : '100%' }} completado
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de √©xito -->
<div class="modal-overlay" *ngIf="mostrarModalExito">
  <div class="modal">
    <div class="modal-content">
      <div class="modal-icon">‚úÖ</div>
      <h3 class="modal-title">¬°Registro Exitoso!</h3>
      <p class="modal-message">El proveedor ha sido registrado correctamente en el sistema.</p>
      <button class="btn-modal" (click)="cerrarModalExito()">Aceptar</button>
    </div>
  </div>
</div>

<!-- Modal de error -->
<div class="modal-overlay" *ngIf="mostrarModalError">
  <div class="modal">
    <div class="modal-content">
      <div class="modal-icon">‚ö†Ô∏è</div>
      <h3 class="modal-title">Error en el Formulario</h3>
      <p class="modal-message">Por favor, complete todos los campos obligatorios correctamente.</p>
      <button class="btn-modal" (click)="cerrarModalError()">Entendido</button>
    </div>
  </div>
</div>