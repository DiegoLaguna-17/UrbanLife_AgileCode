<div class="main-container">
  <div class="ver-container">
    <!-- Botón Volver -->
    <button class="btn-volver" (click)="volver()">← Volver</button>

    <h1 class="titulo-principal">Detalles del Proyecto</h1>

    <!-- Información principal del proyecto -->
    <div class="info-principal">
      <div class="proyecto-header">
        <h2 class="nombre-proyecto">{{ proyecto?.nombre }}</h2>
        <span class="estado-badge" [class]="getEstadoClass()">{{ proyecto?.estado }}</span>
      </div>
      
      <div class="proyecto-descripcion">
        <p>{{proyecto?.descripcion}}</p>
      </div>
    </div>

    <!-- Tarjetas de información -->
    <div class="info-cards">
      <!-- Información General -->
      <div class="info-card">
        <h3 class="card-title">Información General</h3>
        <div class="info-row">
          <strong>Fecha Inicio:</strong>
          <span>{{ proyecto?.fecha_inicio | date:'dd/MM/yyyy' }}</span>
        </div>
        <div class="info-row">
          <strong>Fecha Fin:</strong>
          <span>{{ proyecto?.fecha_fin | date:'dd/MM/yyyy' }}</span>
        </div>
        <div class="info-row">
          <strong>Departamento:</strong>
          <span>{{ proyecto?.departamento }}</span>
        </div>
      </div>

      <!-- Información Financiera -->
      <div class="info-card">
        <h3 class="card-title">Información Financiera</h3>
        <div class="info-row">
          <strong>Presupuesto:</strong>
          <span class="presupuesto">Bs. {{ proyecto?.presupuesto?.toLocaleString('es-BO') }}</span>
        </div>
        <div class="info-row">
          <strong>Duración:</strong>
          <span>{{ calcularDuracion() }} días</span>
        </div>
      </div>

      <!-- Responsable -->
      <div class="info-card">
        <h3 class="card-title">Responsable</h3>
        <div class="info-row">
          <strong>Encargado:</strong>
          <span>{{ proyecto?.nombre_empleado }}</span>
        </div>
        <div class="info-row">
          <strong>Estado Actual:</strong>
          <span [class]="getEstadoClass()">{{ proyecto?.estado }}</span>
        </div>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="botones-accion">
      <button class="btn-accion btn-documentacion" (click)="verDocumentacion()">

        Ver Documentación
      </button>
      <button class="btn-accion btn-actividades" (click)="verActividades()">

        Ver Actividades
      </button>
      <button class="btn-accion btn-documentacion" (click)="verTrabajadores()">
        Ver Trabajadores
      </button>
      <button class="btn-accion btn-documentacion" (click)="descargarReporte()">
        Descargar Reporte
      </button>
    </div>

    <!-- Resumen de información adicional -->
    <div class="resumen-info">
      <div class="resumen-item">
        <span class="resumen-label">Documentos:</span>
        <span class="resumen-valor">{{ proyecto?.documentos?.length || 0 }}</span>
      </div>
      <div class="resumen-item">
        <span class="resumen-label">Actividades:</span>
        <span class="resumen-valor">{{ proyecto?.actividades?.length || 0 }}</span>
      </div>
      <div class="resumen-item">
        <span class="resumen-label">Progreso estimado:</span>
        <span class="resumen-valor">{{ calcularProgreso() }}%</span>
      </div>
    </div>
  </div>
</div>

<!-- Modal de error -->
<div class="modal-overlay" *ngIf="mostrarError">
  <div class="modal">
    <div class="modal-content">
      <div class="modal-icon">⚠️</div>
      <h3 class="modal-title">Error</h3>
      <p class="modal-message">{{ mensajeError }}</p>
      <button class="btn-modal" (click)="cerrarModalError()">Entendido</button>
    </div>
  </div>
</div>