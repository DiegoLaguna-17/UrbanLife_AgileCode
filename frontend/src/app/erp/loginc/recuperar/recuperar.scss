@use '../login/login' as *; // opcional, si compartes tokens

$primary: #0a80fb;
$accent: #5fff12;
$ink-1: #102437;
$glass: rgba(0, 0, 0, .35);

/* Breakpoints */
$bp-xl: 1280px;
$bp-lg: 980px;
$bp-sm: 640px;

:root {
  --space-1: clamp(0.5rem, 1.2vw, 0.8rem);
  --space-2: clamp(0.75rem, 1.6vw, 1.1rem);
  --space-3: clamp(1rem, 2vw, 1.5rem);
  --radius-lg: 20px;
  --radius-sm: 12px;
  --card-w: min(480px, 92vw);
  --text: #ffffff;
}

*,
*::before,
*::after { box-sizing: border-box; }

h2, p { font-family: Arial, Helvetica, sans-serif; margin: 0; }

.visually-hidden {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden; clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
}

.login-page {
  display: grid;
  grid-template-columns: 1fr 1fr;
  min-height: 100svh; /* svh para mobile con barra */
  background: linear-gradient(180deg, $primary 0%, $accent 100%);
  /* En móviles el teclado no empuja el contenido fuera de pantalla */
  align-items: stretch;

  @media (max-width: $bp-lg) {
    grid-template-columns: 1fr; /* apila paneles */
  }
}

/* Panel izquierdo */
.left-panel {
  position: relative;
  background: url('/assets/img/login/construccion.webp') center/cover no-repeat;

  .overlay {
    position: absolute;
    inset: 0;
    background: $glass;
  }

  .brand {
    position: relative;
    z-index: 1;
    height: 100%;
    display: grid;
    place-content: center;
    text-align: center;
    color: #fff;
    padding: var(--space-3);

    &__logo {
      width: clamp(120px, 24vw, 180px);
      margin-inline: auto;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0,0,0,.35);
    }

    &__name {
      margin-top: var(--space-2);
      font-weight: 800;
      letter-spacing: .06em;
      font-size: clamp(1.1rem, 3.4vw, 1.6rem);
      text-shadow: 0 2px 12px rgba(0,0,0,.35);
    }
  }

  @media (max-width: $bp-lg) {
    order: 2;          /* en móviles, que el formulario vaya primero */
    min-height: 35vh;  /* mantenemos un hero cortito */
  }

  @media (max-width: $bp-sm) {
    min-height: 28vh;
  }
}

/* Panel derecho */
.right-panel {
  position: relative;
  display: grid;
  place-content: center;
  padding: clamp(1rem, 4vw, 3rem);
  color: var(--text);

  /* botón volver */
  .back-home-btn {
    position: absolute;
    top: max(1rem, env(safe-area-inset-top));
    right: max(1rem, env(safe-area-inset-right));
    background: rgba(255, 255, 255, 0.16);
    border: 1px solid rgba(255, 255, 255, 0.28);
    border-radius: 999px;
    padding: 8px 16px;
    font-weight: 600;
    color: #fff;
    cursor: pointer;
    transition: transform .15s ease, background .25s ease, border-color .25s ease;
    backdrop-filter: blur(6px);

    &:hover { transform: translateY(-1px); background: rgba(255,255,255,0.22); }
    &:focus-visible { outline: 3px solid rgba(255,255,255,.6); outline-offset: 2px; }
  }

  .recuperar-card {
    margin: auto;
    background: #dff8d7;
    color: $ink-1;
    border-radius: var(--radius-lg);
    padding: clamp(18px, 3.6vw, 32px);
    box-shadow: 0 16px 50px rgba(0,0,0,.25);
    width: var(--card-w);
    text-align: center;
    border-radius: 5vh;

    h2 {
      margin-bottom: 6px;
      font-weight: 800;
      font-size: clamp(1.1rem, 2.6vw, 1.5rem);
    }

    p {
      margin-bottom: var(--space-2);
      font-size: clamp(0.95rem, 1.8vw, 1rem);
      line-height: 1.45;
      color: #2a3a48;
    }

    .form-container {
      display: grid;
      gap: var(--space-2);
    }

    .input-field {
      padding: 14px 16px;
      border-radius: var(--radius-sm);
      border: none;
      outline: none;
      font-size: 1rem;
      box-shadow: inset 0 0 0 1px #cbd5e1;
      background: #fff;
      color: #0b1320;
      transition: box-shadow .15s ease, transform .05s ease;

      &:focus-visible {
        box-shadow: inset 0 0 0 2px $primary, 0 0 0 3px rgba($primary, .18);
      }

      &:autofill { box-shadow: inset 0 0 0 1px #94a3b8; }
    }

    .login-button {
      border: none;
      border-radius: 999px;
      background: linear-gradient(90deg, $primary, $accent);
      color: #fff;
      font-weight: 800;
      padding: 12px 16px;
      cursor: pointer;
      transition: transform .15s ease, filter .15s ease;
      touch-action: manipulation;

      &:hover { transform: translateY(-1px); filter: brightness(1.02); }
      &:active { transform: translateY(0); }
      &:focus-visible { outline: 3px solid rgba($primary, .35); outline-offset: 3px; }
    }

    .mensaje-confirmacion p {
      color: #2a3a48;
      font-size: clamp(0.95rem, 1.8vw, 1rem);
      margin-bottom: var(--space-2);
    }
  }

  /* Layout tuning por viewport */
  @media (min-width: $bp-xl) {
    .recuperar-card { --card-w: min(520px, 40vw); }
  }

  @media (max-width: $bp-lg) {
    padding: clamp(1rem, 5vw, 2rem);
    .recuperar-card { --card-w: min(520px, 94vw); }
  }

  @media (max-width: $bp-sm) {
    .back-home-btn { position: static; margin-bottom: var(--space-2); justify-self: end; }
    .recuperar-card { padding: clamp(16px, 4vw, 24px); }
  }
}

/* Modo reduce motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* Modo oscuro opcional para el card (si el sitio usa dark) */
@media (prefers-color-scheme: dark) {
  .recuperar-card {
    background: #e6ffe0;
  }
}
/* === Fix: botón fijo arriba-derecha en mobile y card centrado === */

/* 1) Mantener el botón absoluto también en pantallas pequeñas */
.right-panel .back-home-btn {
  position: absolute;
  z-index: 2;
  top: max(1rem, env(safe-area-inset-top));
  right: max(1rem, env(safe-area-inset-right));
}

/* 2) Asegurar que el contenedor centre el card y deje espacio bajo el botón */
.right-panel {
  display: grid;
  place-items: center;          /* centra horizontal y vertical */
  padding: clamp(1rem, 4vw, 3rem);
}

@media (max-width: 640px) {
  .right-panel {
    /* deja un colchón arriba para que el botón no se superponga al card */
    padding-top: clamp(4.5rem, 12vw, 5.5rem);
  }
}

/* 3) El card siempre centrado, con márgenes simétricos */
.right-panel .recuperar-card {
  margin: 0 auto;               /* centra en eje horizontal */
  width: min(480px, 92vw);      /* límite sano en mobile */
}

/* 4) Opcional: evitar que el card se pegue a derecha por algún justify-self previo */
@media (max-width: 640px) {
  .right-panel .recuperar-card {
    justify-self: center !important;
  }
}

.input-field.ng-invalid.ng-touched {
  box-shadow: inset 0 0 0 2px #ff4b4b; /* borde rojo si inválido */
}

.error-msg {
  color: #d32f2f;
  font-size: 0.9rem;
  text-align: left;
  margin-top: 6px;
}

